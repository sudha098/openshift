# ðŸ†š OpenShift DeploymentConfig vs Kubernetes Deployment

| Category                   | **Kubernetes Deployment**          | **OpenShift DeploymentConfig (DC)**              |
| -------------------------- | ---------------------------------- | ------------------------------------------------ |
| API Group                  | `apps/v1`                          | `apps.openshift.io/v1`                           |
| Rollout Strategy           | RollingUpdate, Recreate            | Rolling, Recreate (with more hooks and triggers) |
| Rollback                   | Supported                          | Supported                                        |
| Scaling                    | Supported                          | Supported                                        |
| ReplicaSet                 | **Uses ReplicaSets**               | **Uses ReplicationControllers (RCs)**            |
| Build/Triggers integration | âŒ No native triggers               | âœ… Supports **image & config triggers**           |
| Image Change Automation    | âŒ Requires external automation     | âœ… Auto rollout when new image pushed to registry |
| Hooks                      | âŒ No lifecycle hooks in Deployment | âœ… Pre, Mid, Post lifecycle hooks available       |
| Webhooks                   | Supported via external CI/CD       | Supported via triggers                           |
| OpenShift Native?          | âŒ No                               | âœ… Yes                                            |
| Kubernetes Standard?       | âœ… Yes                              | âŒ Not part of upstream Kubernetes                |
| Recommended Usage          | Modern workloads                   | Legacy migration & pipelines using `oc new-app`  |

---

## ðŸ”Ž Key Concept Differences

### â‘  **Rolling updates & rollout control**

| Feature              | Deployment | DeploymentConfig           |
| -------------------- | ---------- | -------------------------- |
| Pause rollout        | Yes        | Yes                        |
| Resume rollout       | Yes        | Yes                        |
| View rollout history | Yes        | Yes                        |
| Action on image push | No         | Yes (image change trigger) |

---

### â‘¡ **Triggers**

DeploymentConfig supports *automatic rollout triggers*:

| Trigger Type             | Purpose                                         |
| ------------------------ | ----------------------------------------------- |
| **ImageChange trigger**  | Auto rollout when new image appears in registry |
| **ConfigChange trigger** | Auto rollout on YAML config change              |

Example (image trigger:

```yaml
triggers:
  - type: ImageChange
```

---

### â‘¢ **Hooks**

DC supports hooks at 3 stages in rollout:

| Stage    | Purpose                            |
| -------- | ---------------------------------- |
| **pre**  | Run job before scaling up new pods |
| **mid**  | Run during rollout                 |
| **post** | Run after new pods running         |

Deployment **does not support rollout hooks** natively.

---

## ðŸ§± YAML Examples

### Kubernetes Deployment (simplified)

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend
spec:
  replicas: 3
  selector:
    matchLabels:
      app: frontend
  template:
    metadata:
      labels:
        app: frontend
    spec:
      containers:
      - name: frontend
        image: myrepo/frontend:v1
```

### OpenShift DeploymentConfig (simplified)

```yaml
apiVersion: apps.openshift.io/v1
kind: DeploymentConfig
metadata:
  name: frontend
spec:
  replicas: 3
  selector:
    app: frontend
  template:
    metadata:
      labels:
        app: frontend
    spec:
      containers:
      - name: frontend
        image: myrepo/frontend:latest
  triggers:
  - type: ImageChange
  - type: ConfigChange
```

---

## ðŸ§° When to use which?

| Situation                                      | Best Choice                       |
| ---------------------------------------------- | --------------------------------- |
| You need upstream Kubernetes compatibility     | **Deployment**                    |
| CI/CD rollout based on new image push          | **DeploymentConfig**              |
| Modern Helm / ArgoCD / GitOps                  | **Deployment**                    |
| OpenShift legacy apps created via `oc new-app` | **DeploymentConfig**              |
| OCP 4.x best practice                          | **Deployment** (Red Hat guidance) |

---

## ðŸ“Œ Current Recommendation

OpenShift 4 uses Kubernetes workloads as first-class citizens.

> For new workloads, **use Deployments instead of DeploymentConfig**.

DeploymentConfig remains **supported** for backward compatibility, especially for image-trigger rollouts.

---
