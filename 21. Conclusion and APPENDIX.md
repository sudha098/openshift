# OpenShift Project

---

## Overview

This repository demonstrates deploying applications on **OpenShift** with **CI/CD integration** using GitLab.

It includes:

* GitLab pipeline setup
* SCM configuration
* OpenShift deployment instructions
* Demo application and best practices

---

## Table of Contents

* [Prerequisites](#prerequisites)
* [Demo – GitLab Setup](#demo---gitlab-setup)
* [Deployment Instructions](#deployment-instructions)
* [GitLab CI/CD Pipeline](#gitlab-cicd-pipeline)
* [Conclusion](#conclusion)
* [Appendix](#appendix)

---

## Prerequisites

<details>
<summary>Click to expand</summary>

1. **OpenShift CLI (`oc`)**
   [Install instructions](https://docs.openshift.com/container-platform/latest/cli_reference/openshift_cli/getting-started-cli.html)

2. **Git / SCM**

   * Clone repositories
   * Commit and push changes

3. **CI/CD Tools (GitLab)**

   * GitLab account and repository
   * GitLab Runner configured
   * OpenShift credentials as GitLab CI/CD variables

</details>

---

## Demo – GitLab Setup

<details>
<summary>Click to expand</summary>

1. Clone the repository:

```bash
git clone <REPO_URL>
cd <REPO_NAME>
```

2. Configure OpenShift credentials in GitLab CI/CD variables:

   * `OPENSHIFT_API_TOKEN`
   * `OPENSHIFT_SERVER`
   * `OPENSHIFT_PROJECT`

3. Run pipeline for deployment:

```bash
git push origin main
```

</details>

---

## Deployment Instructions

<details>
<summary>Click to expand</summary>

1. **Login to OpenShift**:

```bash
oc login <OPENSHIFT_CLUSTER> --token=<TOKEN>
```

2. **Create/Open Project**:

```bash
oc new-project demo-project || oc project demo-project
```

3. **Deploy application**:

```bash
oc apply -f openshift/deployment.yaml
```

4. **Check deployment status**:

```bash
oc get pods
oc get routes
```

</details>

---

## GitLab CI/CD Pipeline

<details>
<summary>Click to expand</summary>

Minimal `.gitlab-ci.yml` example:

```yaml
stages:
  - build
  - deploy

variables:
  OPENSHIFT_SERVER: $OPENSHIFT_SERVER
  OPENSHIFT_TOKEN: $OPENSHIFT_API_TOKEN
  OPENSHIFT_PROJECT: $OPENSHIFT_PROJECT

build:
  stage: build
  image: docker:latest
  services:
    - docker:dind
  script:
    - docker build -t myapp:$CI_COMMIT_SHA .
    - docker push myregistry/myapp:$CI_COMMIT_SHA

deploy:
  stage: deploy
  image: quay.io/openshift/origin-cli:latest
  script:
    - oc login $OPENSHIFT_SERVER --token=$OPENSHIFT_TOKEN
    - oc project $OPENSHIFT_PROJECT
    - oc set image deployment/myapp myapp=myregistry/myapp:$CI_COMMIT_SHA
    - oc rollout status deployment/myapp
```

> Replace `myapp`, `myregistry`, and project names with your actual configuration.

</details>

---

## Conclusion

<details>
<summary>Click to expand</summary>

* Quick setup for deploying apps to OpenShift via GitLab CI/CD
* Covers SCM, build, and deployment best practices
* Optional context settings — works without additional authentication

</details>

