## ğŸ§± **S2I (Source-to-Image) Overview**

**S2I (Source-to-Image)** is an OpenShift-native build strategy designed to **build reproducible container images directly from source code**, without requiring developers to write Dockerfiles.

### ğŸ” **How S2I Works**

S2I performs the image build in **two stages**:

| Stage                  | Description                                                                                                     |
| ---------------------- | --------------------------------------------------------------------------------------------------------------- |
| 1ï¸âƒ£ Builder Image      | A runtime image (e.g., Node.js, Python, Java) containing necessary language runtime, compiler, and build tools. |
| 2ï¸âƒ£ Application Source | Your source code is injected into the builder image and a final runnable container image is produced.           |

---

### ğŸ§  **Why S2I is useful**

| Benefit                 | Explanation                                                            |
| ----------------------- | ---------------------------------------------------------------------- |
| ğŸ” Reproducible builds  | Same base builder image ensures consistent outcomes                    |
| ğŸ’¡ No Dockerfile needed | Developers only provide code; OpenShift handles image creation         |
| ğŸ›¡ï¸ Secure              | Limits root access and runs assemply scripts in controlled environment |
| ğŸš€ Fast                 | Uses incremental builds (keeps dependencies cached)                    |

---

### âš™ï¸ **S2I Build Flow**

```
Developer pushes code â†’ OpenShift BuildConfig triggers S2I â†’ Builder image + source code â†’ Final application image â†’ Deployment
```

---

### ğŸ§© Key S2I Scripts

| Script                        | Purpose                                                          |
| ----------------------------- | ---------------------------------------------------------------- |
| **assemble**                  | Builds the application (installing dependencies, compiling code) |
| **run**                       | Starts the application inside the final image                    |
| **save-artifacts** (optional) | Used for incremental builds by reusing previous dependencies     |

---

### ğŸ§ª Supported Languages / Examples

Builder images provided by Red Hat / OpenShift:

* `s2i-nodejs`
* `s2i-python`
* `s2i-java`
* `s2i-go`
* `s2i-php`
* `s2i-dotnet`

---

### ğŸ± **Example â€“ Create S2I Application**

```bash
oc new-app registry.redhat.io/rhscl/nodejs-14-rhel7~https://github.com/your/repo.git
```

This command automatically creates:
âœ” BuildConfig (S2I)
âœ” ImageStream
âœ” DeploymentConfig
âœ” Service

---

### ğŸ”„ **Triggering a Build**

```bash
oc start-build <buildconfig-name> --follow
```

---

### ğŸ“¦ **Accessing the Built Image**

```bash
oc get is
```

---

### ğŸŒ **Exposing Application Route**

```bash
oc expose svc/<service-name>
```

---

### ğŸ†š S2I vs Docker Build Strategy

| Feature             | S2I Strategy           | Docker Strategy         |
| ------------------- | ---------------------- | ----------------------- |
| Dockerfile required | âŒ Not required         | âœ” Required              |
| Incremental builds  | âœ” Supported            | âŒ Requires custom logic |
| Focus               | Build from source      | Build from Dockerfile   |
| Security            | More secure (non-root) | Depends on Dockerfile   |

---

### ğŸ“ When to use S2I

| Use S2I ifâ€¦                      | Use Docker/Buildah ifâ€¦              |
| -------------------------------- | ----------------------------------- |
| You have source code only        | You need OS-level control           |
| You want fast incremental builds | You need custom base images         |
| You want developer self-service  | CI/CD pipeline already builds image |

---

### ğŸš© Using S2I CLI locally (optional)

```bash
s2i build https://github.com/your/repo/ registry.redhat.io/rhscl/nodejs-14-rhel7 app:v1
docker run -p 8080:8080 app:v1
```
